<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>网站后台管理模版</title>
    <link rel="stylesheet" type="text/css" href="/admin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="/admin/css/admin.css"/>
    <style type="text/css">

        #daoyouricheng td {
            text-align: center;

            width: 30px;
            height: 5px;

        }
        .jidiaoinfo {
            width: 370px; height: 170px; border:1px solid #2B2E37; margin: 10px; padding: 15px;
        }
        .jidiaoinfo dd {
            height: 28px;
        }
        #daoyouxinxi {

        }

        #tbodyinfo tr td {
            border: 1px solid #0C0C0C;
        }

        #daoyouinfo tr td {
            margin-top: 20px;
        }

        .nengyong {

            color: #0C0C0C;

        }

        .bunengyong {

            color: #0C0C0C;
        }


    </style>
</head>

<body style="overflow-x: hidden;">

<div class="page-content-wrap">
    <div style="height:600px; width: 450px;float: left;">
        <ul class="flow-default" style="height:600px; overflow-y: auto;  " id="LAY_demo2"  ></ul>
    </div>

    <div style="height:600px; overflow-y: auto; overflow-x: auto; width: 820px;float: left;">
        <h1>导游日程信息</h1>
        <table class="layui-table" lay-even="" lay-skin="nob" id="daoyouinfo">

            <thead>
            <tr id="daoyouricheng">
                <td><span style="width: 90px;"></span></td>
                <td><span style="width: 120px;">aaaaaa</span></td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
                <td>10</td>
                <td>11</td>
                <td>12</td>
                <td>13</td>
                <td>14</td>
                <td>15</td>
                <td>16</td>
                <td>17</td>
                <td>18</td>
                <td>19</td>
                <td>20</td>
                <td>21</td>
                <td>22</td>
                <td>23</td>
                <td>24</td>
                <td>25</td>
                <td>26</td>
                <td>27</td>
                <td>28</td>
                <td>29</td>
                <td>30</td>
                <td>31</td>
            </tr>
            </thead>
            <tbody id="tbodyinfo">
            <tr>
                <td>李晓杰</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="bunengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>


            </tr>
            <tr>
                <td>李晓杰</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
            </tr>
            <tr>
                <td>李晓杰</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="bunengyong"></td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
                <td class="nengyong">√</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="/admin/layui/layui.js" type="text/javascript" charset="utf-8"></script>
<script src="/admin/js/common.js" type="text/javascript" charset="utf-8"></script>
<script>
    layui.use(['form', 'jquery', 'layer', 'dialog'], function () {
        var $ = layui.jquery;

        //修改状态
        $('#table-list').on('click', '.table-list-status', function () {
            var That = $(this);
            var status = That.attr('data-status');
            var id = That.parent().attr('data-id');
            if (status == 1) {
                That.removeClass('layui-btn-normal').addClass('layui-btn-warm').html('隐藏').attr('data-status', 2);
            } else if (status == 2) {
                That.removeClass('layui-btn-warm').addClass('layui-btn-normal').html('显示').attr('data-status', 1);

            }
        })

    });
</script>




<script>
    /**
     * 加载流显示 调度信息(lixiaojie)
     */
    layui.use('flow', function () {
        $ = layui.jquery;
        var form = layui.form
            ,layer = layui.layer;
        var flow = layui.flow;
        var  limitcount =3;
        flow.load({

            elem: '#LAY_demo2' //流加载容器
            ,
            scrollElem: '#LAY_demo2' //滚动条所在元素，一般不用填，此处只是演示需要。
            ,
            isAuto: false,
            isLazyimg: true,
            done: function (page, next) { //加载下一页
                //模拟插入
                var lis = [];
                 // 当前页码
                setTimeout(function () {
                    $.ajax({
                        url: "/dispatch/selectDispatchs",
                        data: {
                            "pageNo": page,
                            "pageSize": limitcount
                        },
                        async: false,
                        dataType: "json",
                        type: "post",
                        success: function (ReponseResult) {
                            pagecount=ReponseResult.count/limitcount;
                            $(ReponseResult.data.list).each(function (i, e) {
                                var content = "<div class='jidiaoinfo' >";
                                content += "<dl>";
                                content += "<dd style='float: right'><p style='line-height: 40px'>姓名："+e.guide.guideName+"</p><p>证件号："+e.guide.certificate+"</p></dd>";
                                content += "<dd><span>团号:"+e.groundConnectionNumber+"</span></dd>";

                                content += "<dd>发往路线："+e.sendLine+"</dd>";
                                content += "<dd>人数："+e.num+"</dd>";
                                content += "<dd><span style=''>beginTime："+e.travelStartTime+"</span><span style='margin-left: 20px'>endTime："+e.travelEndTime+"</span></dd>";
                                content += "<dd>报价："+e.offer+"</dd>";
                                content += "<dd ><button onclick='onCheckDispatchInfo("+e.dispatchId+")' class='layui-btn layui-btn-normal layui-btn-radius'>通过</button>&nbsp;&nbsp;<button onclick='noCheckDispatchInfo("+e.dispatchId+")' class='layui-btn layui-btn-normal layui-btn-radius'>打回</button></dd>";content += "<dd ></dd>";
                                content += "</dl>";
                                content += "</div>";
                                lis.push(content);
                            });

                            next(lis.join(''), page < ReponseResult.data.pages);
                        }
                    });

                }, 500);
    }
    })
    ;

    })
    ;
</script>
<script>
    /**
     * 总控审核调度信息（lixiaojie)
     * @param dispatchId
     */
    function onCheckDispatchInfo(dispatchId) {

        $.ajax({
            url: "/dispatch/onCheckDispatchInfo",
            data: {
              "dispatchId":dispatchId
            },
            async: false,
            dataType: "json",
            type: "post",
            success: function (ReponseResult) {
                if (ReponseResult.data==0||ReponseResult.data=='0') {
                    alert("审核失败")
                }
                if (ReponseResult.data==1||ReponseResult.data=='1') {
                    alert("审核成功")
                }
                location.reload();
            }
        });

    }

    /**
     * 总控打回调度信息（lixiaojie)
     * @param dispatchId
     */
    function noCheckDispatchInfo(dispatchId) {
        $.ajax({
            url: "/dispatch/noCheckDispatchInfo",
            data: {
                "dispatchId":dispatchId
            },
            async: false,
            dataType: "json",
            type: "post",
            success: function (ReponseResult) {
                if (ReponseResult.data==0||ReponseResult.data=='0') {
                    alert("打回失败")
                }
                if (ReponseResult.data==1||ReponseResult.data=='1') {
                    alert("打回成功")
                }
                location.reload();

            }
        });
    }

</script>

</body>

</html>